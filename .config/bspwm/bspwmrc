#! /bin/bash
# TODO
# * Multimonitor

bspc rule -r "*";



##### Autostart

# Key daemon
killall -9 sxhkd;
sxhkd &

# Compositor
killall -9 compton;
compton --config ~/compton.conf &

# Notification manager
killall -9 dunst;
dunst -config ~/.config/dunst/dunstrc &

# Status bar
killall -9 polybar;
polybar primary &

# Wallpaper
~/.fehbg &

# Network manager applet
killall -9 nm-applet;
nm-applet &

# Load up the xresources file
xrdb ~/.Xresources &




##### Workspace/Monitor config

bspc monitor -d 1 2 3 4 5 6 7 8 9 10

# MONITORS=$(bspc query -M --names);
# MONITOR_COUNT=$(echo "$MONITORS" | wc -l);
# if [[ "$MONITOR_COUNT" == 2 ]]; then
  # MON_PRIMARY="eDP-1"
  # MON_SECONDARY="HDMI-1"
  # bspc monitor $MON_PRIMARY -d 1 2 3 4 5
  # bspc monitor $MON_SECONDARY -d 6 7 8 9 10
# else
  # bspc monitor -d 1 2 3 4 5 6 7 8 9 10
# fi


bspc config remove_disabled_monitors    true
bspc config remove_unplugged_monitors   true
bspc config merge_overlapping_monitors  true




##### UI config

bspc config presel_feedback_color	"#00d080"

bspc config border_width         0
bspc config window_gap           12

bspc config pointer_modifier  lock
bspc config pointer_action1   move
bspc config pointer_action2   resize_side
bspc config pointer_action3   resize_corner
bspc config click_to_focus    any




##### Layouts config
bspc config automatic_scheme  alternate # alternate|spiral|longest_side
bspc config initial_polarity  second_child

bspc config split_ratio          0.6

bspc config single_monocle       true
bspc config borderless_monocle   true
bspc config gapless_monocle      true




##### Node rules

bspc rule -a "brave-browser" -o desktop='^6'

bspc config external_rules_command "$HOME/.config/bspwm/external_rules"




##### Initialized applications

window_count=$(bspc query -N | wc -l);

if [[ "$window_count" = "0" ]]; then
  browser &
  spotify &
fi

